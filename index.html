<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Gerador de Hist√≥rias ‚Äî Online (Simplificado)</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{--bg:#0f1724;--card:#0b1220;--muted:#94a3b8;--accent:#3b82f6}
  *{box-sizing:border-box;font-family:Inter,system-ui,Arial,Helvetica,sans-serif}
  body{margin:0;background:linear-gradient(180deg,#071025,#0b1220);color:#e6eef8}
  .container{max-width:980px;margin:28px auto;padding:20px}
  .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);padding:18px;border-radius:12px}
  h1{margin:0 0 8px;font-size:24px}
  label{display:block;font-size:13px;color:var(--muted);margin-bottom:6px}
  input[type=text],textarea,select{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
  textarea{min-height:90px;resize:vertical}
  .row{display:flex;gap:12px}
  .col{flex:1}
  .btn{background:linear-gradient(90deg,var(--accent),#2563eb);color:white;border:none;padding:12px 16px;border-radius:10px;cursor:pointer;font-weight:600}
  .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}
  .muted{color:var(--muted);font-size:13px}
  pre{white-space:pre-wrap;background:#071122;padding:12px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);overflow:auto}
  .footer{margin-top:14px;color:var(--muted);font-size:12px;text-align:center}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
</style>
</head>
<body>
<div class="container">
  <div class="card">
    <h1>üìñ Gerador de Hist√≥rias ‚Äî Online (Sem API)</h1>
    <div class="muted">Vers√£o web simplificada sem API e sem WebLLM. Funciona 100% no navegador usando gerador local.</div>

    <hr style="margin:12px 0;border:none;border-top:1px solid rgba(255,255,255,0.02)">

    <div class="grid">
      <div>
        <label>üåç Pa√≠s</label>
        <input id="country" type="text" placeholder="Ex: Brasil" />
      </div>
      <div>
        <label>üìù T√≠tulo</label>
        <input id="title" type="text" placeholder="Ex: XIV's Warning: Respect in Communion" />
      </div>
    </div>

    <div style="margin-top:12px">
      <label>‚úçÔ∏è Sinopse</label>
      <textarea id="synopsis" placeholder="Descreva a base da hist√≥ria..."></textarea>
    </div>

    <div style="margin-top:12px" class="row">
      <div class="col">
        <label>üåê Idioma</label>
        <select id="language">
          <option>Portuguese</option>
          <option>English</option>
          <option selected>Spanish</option>
          <option>French</option>
        </select>
      </div>
      <div class="col">
        <label>üé≠ Tom</label>
        <select id="tone">
          <option value="emotional">Emocional</option>
          <option value="dramatic">Dram√°tico</option>
          <option value="inspiring">Inspirador</option>
        </select>
      </div>
    </div>

    <div style="margin-top:12px" class="row">
      <button id="generate" class="btn">‚ñ∂Ô∏è Gerar Hist√≥ria & Prompts</button>
      <button id="example" class="btn-ghost">Carregar Exemplo</button>
    </div>

    <div id="status" class="muted" style="margin-top:10px"></div>
  </div>

  <div id="output" style="margin-top:14px"></div>

  <div class="footer">
    Este gerador web usa um sistema local de cria√ß√£o de narrativa. Nenhuma API √© utilizada.
  </div>
</div>

<script>
function rand(arr){ return arr[Math.floor(Math.random()*arr.length)]; }
function joinSentences(s){ return s.join(" "); }

function paragraph(theme, tone){
  const subj=["Ele","Ela","O protagonista","A personagem","A figura central"];
  const verbs=["enfrentou","recordou","sentiu","descobriu","questionou","presenciou"];
  const objs=["um sil√™ncio profundo","um sinal inesperado","uma luta interior","uma d√∫vida antiga","uma verdade desconfort√°vel"];
  const mood = tone==="dramatic" ? "Tudo parecia √† beira de um colapso." :
              tone==="inspiring" ? "Mesmo assim, havia esperan√ßa no ar." :
              "As emo√ß√µes eram dif√≠ceis de conter.";
  return `${rand(subj)} ${rand(verbs)} ${rand(objs)} enquanto pensava sobre ${theme}. ${mood}`;
}

function buildChapter(idx,title,country,tone,theme){
  const chapTitle = `${idx}. ${title} ‚Äî Parte ${idx}`;
  const summary = `Neste cap√≠tulo, surge um conflito envolvendo ${rand([country,"mudan√ßa","f√©","mem√≥ria"])}.`;
  let body = "";
  for(let i=0;i<4;i++){
    body += paragraph(theme,tone)+"\n\n";
  }
  return {title:chapTitle, summary, body};
}

function generateStory(inputs){
  const {country,title,synopsis,language,tone}=inputs;
  const theme = synopsis.split(" ").slice(0,4).join(" ");
  const chapters=[];
  for(let i=1;i<=5;i++){
    chapters.push(buildChapter(i,title,country,tone,theme));
  }
  let text="";
  chapters.forEach((c,i)=>{
    text+=`‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\nCAP√çTULO ${i+1}: ${c.title}\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\nRESUMO:\n${c.summary}\n\n${c.body}\n`;
  });
  return {chapters, full:text};
}

function generatePrompts(chapters,title){
  const chapter_prompts = chapters.map((c,i)=> 
    `Cap√≠tulo ${i+1}: ${c.title}. Visual cinematogr√°fico, luz dram√°tica, composi√ß√£o intensa, cores fortes, atmosfera emocional.`
  );
  const thumbnail_prompt = `THUMBNAIL: ${title.toUpperCase()} ‚Äî rosto em close, luz vermelha, estilo dram√°tico, impacto visual m√°ximo, t√≠tulo em destaque.`;
  return {chapter_prompts, thumbnail_prompt};
}

document.getElementById("example").addEventListener("click",()=>{
  document.getElementById("country").value="Vaticano";
  document.getElementById("title").value="XIV's Warning: Respect in Communion";
  document.getElementById("synopsis").value="Um alerta espiritual que desafia fi√©is sobre respeito e consci√™ncia na comunh√£o.";
});

document.getElementById("generate").addEventListener("click",()=>{
  const country=document.getElementById("country").value.trim();
  const title=document.getElementById("title").value.trim();
  const synopsis=document.getElementById("synopsis").value.trim();
  const language=document.getElementById("language").value;
  const tone=document.getElementById("tone").value;

  if(!country||!title||!synopsis){
    alert("Preencha todos os campos obrigat√≥rios.");
    return;
  }

  document.getElementById("status").innerText="Gerando hist√≥ria...";

  setTimeout(()=>{
    const story=generateStory({country,title,synopsis,language,tone});
    const prompts=generatePrompts(story.chapters,title);
    renderOutput(story.full,prompts);
    document.getElementById("status").innerText="Pronto!";
  },200);
});

function renderOutput(text,prompts){
  const out=document.getElementById("output");
  let html=`<div class="card"><h2>üìö Hist√≥ria Gerada</h2><pre id="story">${text}</pre>`;
  html+=`<button class="btn" onclick="copyText('story')">Copiar</button>`;
  html+=`<hr><h3>üì∑ Prompts</h3>`;
  html+=`<h4>Por Cap√≠tulo</h4><ol>`;
  prompts.chapter_prompts.forEach((p,i)=>{ html+=`<li><pre>${p}</pre></li>`; });
  html+=`</ol>`;
  html+=`<h4>Thumbnail</h4><pre>${prompts.thumbnail_prompt}</pre>`;
  html+=`</div>`;
  out.innerHTML=html;
}

function copyText(id){
  navigator.clipboard.writeText(document.getElementById(id).innerText);
  alert("Copiado!");
}
</script>
</body>
</html>
